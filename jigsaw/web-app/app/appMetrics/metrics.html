<div><a ng-click="showRecalls()">Back to Recalls</a></div>
<div ng-show="isAuthenticated">
	<h1>Application Metrics</h1>
	<p>
	    <button type="button" class="btn btn-primary" ng-click="getMetrics()"><span class="glyphicon glyphicon-refresh"></span>&nbsp;Refresh Metrics</button>
	</p>
	
	<h3>JVM Metrics</h3>
	<div class="row" ng-if="metrics" ng-cloak>
	    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" ng-if="metrics.gauges">
	        <b><u>Memory</u></b>
	        <p>Total  ({{(metrics.gauges['jvm.memory.total.used'].value / 1048576) | number:0}} MB / {{(metrics.gauges['jvm.memory.total.max'].value / 1048576) | number:0}} MB)</p>
	        <div class="progress progress-striped" style="height:25px">
	            <div class="progress-bar progress-bar-success" role="progressbar"
	                 aria-valuenow="{{metrics.gauges['jvm.memory.total.used'].value / 1048576 | number:0}}"
	                 aria-valuemin="0"
	                 aria-valuemax="{{metrics.gauges['jvm.memory.total.max'].value / 1048576 | number:0}}"
	                 style="width: {{((metrics.gauges['jvm.memory.total.used'].value / metrics.gauges['jvm.memory.total.max'].value) * 100.0) | number:2}}%">
	                 <span class="progress-value" style="line-height:25px; font-weight:bold; vertical-align:middle;">{{((metrics.gauges['jvm.memory.total.used'].value / metrics.gauges['jvm.memory.total.max'].value) * 100.0) | number:2}}%</span>
	            </div>
	        </div>
	        <p>Heap  ({{metrics.gauges['jvm.memory.heap.used'].value / 1048576 | number:0}} MB / {{metrics.gauges['jvm.memory.heap.max'].value / 1048576 | number:0}} MB)</p>
	        <div class="progress progress-striped" style="height:25px">
	            <div class="progress-bar progress-bar-success" role="progressbar"
	                 aria-valuenow="{{metrics.gauges['jvm.memory.heap.used'].value / 1048576 | number:0}}"
	                 aria-valuemin="0"
	                 aria-valuemax="{{metrics.gauges['jvm.memory.heap.max'].value / 1048576 | number:0}}"
	                 style="width: {{metrics.gauges['jvm.memory.heap.usage'].value * 100.0 | number:2}}%">
	                 <span class="progress-value" style="line-height:25px; font-weight:bold; vertical-align:middle;">{{metrics.gauges['jvm.memory.heap.usage'].value * 100.0 | number:2}}%</span>
	            </div>
	        </div>
	        <p>Nonheap  ({{metrics.gauges['jvm.memory.non-heap.used'].value / 1048576 | number:0}} MB / {{metrics.gauges['jvm.memory.non-heap.committed'].value / 1048576 | number:0}} MB)</p>
	        <div class="progress progress-striped" style="height:25px">
	            <div class="progress-bar progress-bar-success" role="progressbar"
	                aria-valuenow="{{metrics.gauges['jvm.memory.non-heap.used'].value / 1048576 | number:0}}"
	                aria-valuemin="0"
	                aria-valuemax="{{metrics.gauges['jvm.memory.non-heap.committed'].value / 1048576 | number:0}}"
	                style="width:{{((metrics.gauges['jvm.memory.non-heap.used'].value / metrics.gauges['jvm.memory.non-heap.committed'].value) * 100.0) | number:2}}%">
	                <span class="progress-value" style="line-height:25px; font-weight:bold; vertical-align:middle;">{{((metrics.gauges['jvm.memory.non-heap.used'].value / metrics.gauges['jvm.memory.non-heap.committed'].value) * 100.0) | number:2}}%</span>
	            </div>
	        </div>
	    </div>
	    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="border-right: 1px solid #ccc; border-left: 1px solid #ccc;" ng-if="metrics.gauges">
	    <b><u>Threads</u></b>
	        <p>Runnable  ({{metrics.gauges['jvm.threads.runnable.count'].value}})</p>
	        <div class="progress progress-striped" style="height:25px">
	            <div class="progress-bar progress-bar-success" role="progressbar"
	                 aria-valuenow="{{metrics.gauges['jvm.threads.runnable.count'].value}}"
	                 aria-valuemin="0"
	                 aria-valuemax="{{metrics.gauges['jvm.threads.count'].value}}"
	                 style="width:{{((metrics.gauges['jvm.threads.runnable.count'].value / metrics.gauges['jvm.threads.count'].value) * 100.0) | number:2}}%">
	                 <span class="progress-value" style="line-height:25px; font-weight:bold; vertical-align:middle;">{{((metrics.gauges['jvm.threads.runnable.count'].value / metrics.gauges['jvm.threads.count'].value) * 100.0) | number:2}}%</span>
	            </div>
	        </div>
	        <p>Timedwaiting  ({{metrics.gauges['jvm.threads.timed_waiting.count'].value}})</p>
	        <div class="progress progress-striped" style="height:25px">
	            <div class="progress-bar progress-bar-warning" role="progressbar"
	                 aria-valuenow="{{metrics.gauges['jvm.threads.timed_waiting.count'].value}}"
	                 aria-valuemin="0"
	                 aria-valuemax="{{metrics.gauges['jvm.threads.count'].value}}"
	                 style="width: {{((metrics.gauges['jvm.threads.timed_waiting.count'].value / metrics.gauges['jvm.threads.count'].value) * 100.0) | number:2}}%">
	                 <span class="progress-value" style="line-height:25px; font-weight:bold; vertical-align:middle;">{{((metrics.gauges['jvm.threads.timed_waiting.count'].value / metrics.gauges['jvm.threads.count'].value) * 100.0) | number:2}}%</span>
	            </div>
	        </div>
	        <p>Waiting  ({{metrics.gauges['jvm.threads.waiting.count'].value}})</p>
	        <div class="progress progress-striped" style="height:25px">
	            <div class="progress-bar progress-bar-info" role="progressbar"
	                 aria-valuenow="{{metrics.gauges['jvm.threads.waiting.count'].value}}"
	                 aria-valuemin="0"
	                 aria-valuemax="{{metrics.gauges['jvm.threads.count'].value}}"
	                 style="width: {{((metrics.gauges['jvm.threads.waiting.count'].value / metrics.gauges['jvm.threads.count'].value) * 100.0) | number:2}}%">
	                 <span class="progress-value" style="line-height:25px; font-weight:bold; vertical-align:middle;">{{((metrics.gauges['jvm.threads.waiting.count'].value / metrics.gauges['jvm.threads.count'].value) * 100.0) | number:2}}%</span>
	            </div>
	        </div>
	        <p>Blocked  ({{metrics.gauges['jvm.threads.blocked.count'].value}})</p>
	        <div class="progress progress-striped" style="height:25px">
	            <div class="progress-bar progress-bar-danger" role="progressbar"
	                 aria-valuenow="{{metrics.gauges['jvm.threads.blocked.count'].value}}"
	                 aria-valuemin="0"
	                 aria-valuemax="{{metrics.gauges['jvm.threads.count'].value}}"
	                 style="width:{{((metrics.gauges['jvm.threads.blocked.count'].value / metrics.gauges['jvm.threads.count'].value) * 100.0) | number:2}}%">
	                 <span class="progress-value" style="line-height:25px; font-weight:bold; vertical-align:middle;">{{((metrics.gauges['jvm.threads.blocked.count'].value / metrics.gauges['jvm.threads.count'].value) * 100.0) | number:2}}%</span>
	            </div>
	        </div>
	        <div>
	        	<button id="threadBtn" class="btn btn-info" type="button" role="button" ng-click="showThreads()">Show Thread Info</button>
	        </div>
	    </div>
	    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" ng-if="metrics.gauges">
	        <b><u>Garbage collections</u></b>
	        <div class="row">
	            <div class="col-md-9">Mark Sweep count</div>
	            <div class="col-md-3 text-right">{{metrics.gauges['jvm.gc.PS-MarkSweep.count'].value}}</div>
	        </div>
	        <div class="row">
	            <div class="col-md-9">Mark Sweep time</div>
	            <div class="col-md-3 text-right">{{metrics.gauges['jvm.gc.PS-MarkSweep.time'].value}}&nbsp;ms</div>
	        </div>
	        <div class="row">
	            <div class="col-md-9">Scavenge count</div>
	            <div class="col-md-3 text-right">{{metrics.gauges['jvm.gc.PS-Scavenge.count'].value}}</div>
	        </div>
	        <div class="row">
	            <div class="col-md-9">Scavenge time</div>
	            <div class="col-md-3 text-right">{{metrics.gauges['jvm.gc.PS-Scavenge.time'].value}}&nbsp;ms</div>
	        </div>
	        <br>
	        <b><u>Disk Space</u></b>
	        <span style="display: inline-block" class="led pull-right" ng-class="{'led-green':healthyDiskClass, 'led-red':!healthyDiskClass}"> </span>
	        <p>Free ({{(free_space_gigs | number:2)}} GB)</p>
	        <div class="progress progress-striped" style="height:25px">
	            <div class="progress-bar" ng-class="{'progress-bar-success':healthyDiskClass, 'progress-bar-danger':!healthyDiskClass}"
	            	role="progressbar"
	                aria-valuenow="{{free_space_bytes}}"
	                aria-valuemin="0"
	                aria-valuemax="{{total_space_bytes}}"
	                style="width: {{free_space_ratio * 100.0 | number:2}}%">
					<span class="progress-value" style="line-height:25px; font-weight:bold; vertical-align:middle;">{{free_space_ratio * 100.0 | number:2}}%</span>
	            </div>
	        </div>
	        <br>
	        <b><u>Database</u></b>
	        <span style="display: inline-block" class="led pull-right" ng-class="{'led-green':healthyDBClass, 'led-red':!healthyDBClass}"> </span>
	        <p><div><span ng-show="healthyDBClass" class="label label-success">CONNECTED</span><span ng-hide="healthyDBClass" class="label label-danger">NOT CONNECTED</span></div></p>
	    </div>
	</div>
	<hr>
	<div ng-if="metrics && metrics.meters && metrics.timers && metrics.timers['com.codahale.metrics.servlet.AbstractInstrumentedFilter.requests'] && metrics.timers['com.codahale.metrics.servlet.AbstractInstrumentedFilter.requests'].count > 0">
	<h3>HTTP Requests (events per day)</h3>
	<p><b>Active : {{metrics.counters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.activeRequests'].count}}</b></p>
	<p><b>Total : {{metrics.timers['com.codahale.metrics.servlet.AbstractInstrumentedFilter.requests'].count}}</b></p>
	<div class="table-responsive">
	    <table class="table table-striped">
	        <thead>
	        <tr>
	            <th>Code</th>
	            <th>Count</th>
	            <th>Ratio</th>
	            <th class="text-right">Mean</th>
	            <th class="text-right">Average (1 min)</th>
	            <th class="text-right">Average (5 min)</th>
	            <th class="text-right">Average (15 min)</th>
	        </tr>
	        </thead>
	        <tbody>
	        <div ng-if="metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.ok'] && metrics.timers['com.codahale.metrics.servlet.AbstractInstrumentedFilter.requests']">
		        <tr>
		            <td>OK</td>
		            <td>
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.ok'].count}}
		            </td>
		            <td>
		                <div class="progress progress-striped" style="height:25px">
		                    <div class="progress-bar progress-bar-success" role="progressbar"
		                         aria-valuenow="{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.ok'].count}"
		                         aria-valuemin="0"
		                         aria-valuemax="{{metrics.timers['com.codahale.metrics.servlet.AbstractInstrumentedFilter.requests'].count}}"
		                         style="width:{{((metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.ok'].count / metrics.timers['com.codahale.metrics.servlet.AbstractInstrumentedFilter.requests'].count) * 100.0) | number:2}}%">
		                         <span class="progress-value" style="line-height:25px; font-weight:bold; vertical-align:middle;">{{((metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.ok'].count / metrics.timers['com.codahale.metrics.servlet.AbstractInstrumentedFilter.requests'].count) * 100.0) | number:2}}%</span>
		                    </div>
		                </div>
		            </td>
		            <td class="text-right">
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.ok'].mean_rate | number:2}} 
		            </td>
		            <td class="text-right">
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.ok'].m1_rate | number:2}}
		            </td>
		            <td class="text-right">
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.ok'].m5_rate | number:2}}
		            </td>
		            <td class="text-right">
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.ok'].m15_rate | number:2}}
		            </td>
		        </tr>
	        </div>
	        <div ng-if="metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.notFound'] && metrics.timers['com.codahale.metrics.servlet.AbstractInstrumentedFilter.requests']">
		        <tr>
		            <td>Not Found</td>
		            <td>
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.notFound'].count}}
		            </td>
		            <td>
		                <div class="progress progress-striped" style="height:25px">
		                    <div class="progress-bar progress-bar-warning" role="progressbar"
		                         aria-valuenow="{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.notFound'].count}}"
		                         aria-valuemin="0"
		                         aria-valuemax="{{metrics.timers['com.codahale.metrics.servlet.AbstractInstrumentedFilter.requests'].count}}"
		                         style="width: {{((metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.notFound'].count / metrics.timers['com.codahale.metrics.servlet.AbstractInstrumentedFilter.requests'].count) * 100.0) | number:2}}%">
		                         <span class="progress-value" style="line-height:25px; font-weight:bold; vertical-align:middle;">{{((metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.notFound'].count / metrics.timers['com.codahale.metrics.servlet.AbstractInstrumentedFilter.requests'].count) * 100.0) | number:2}}%</span>
		                    </div>
		                </div>
		            </td>
		            <td class="text-right">
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.notFound'].mean_rate | number:2}}	
		            </td>
		            <td class="text-right">
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.notFound'].m1_rate | number:2}}
		            </td>
		            <td class="text-right">
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.notFound'].m5_rate | number:2}}
		            </td>
		            <td class="text-right">
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.notFound'].m15_rate | number:2}}
		            </td>
		        </tr>
	        </div>
	        <div ng-if="metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.serverError'] && metrics.timers['com.codahale.metrics.servlet.AbstractInstrumentedFilter.requests']">
		        <tr>
		            <td>Server error</td>
		            <td>
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.serverError'].count}}
		            </td>
		            <td>
		                <div class="progress progress-striped" style="height:25px">
		                    <div class="progress-bar progress-bar-danger" role="progressbar"
		                         aria-valuenow="{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.serverError'].count}}"
		                         aria-valuemin="0"
		                         aria-valuemax="{{metrics.timers['com.codahale.metrics.servlet.AbstractInstrumentedFilter.requests'].count}}"
		                         style="width: {{((metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.serverError'].count / metrics.timers['com.codahale.metrics.servlet.AbstractInstrumentedFilter.requests'].count) * 100.0) | number:2}}%">
		                         <span class="progress-value" style="line-height:25px; font-weight:bold; vertical-align:middle;">{{((metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.serverError'].count / metrics.timers['com.codahale.metrics.servlet.AbstractInstrumentedFilter.requests'].count) * 100.0) | number:2}}%</span>
		                    </div>
		                </div>
		            </td>
		            <td class="text-right">
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.serverError'].mean_rate | number:2}}
		            </td>
		            <td class="text-right">
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.serverError'].m1_rate | number:2}}
		            </td>
		            <td class="text-right">
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.serverError'].m5_rate | number:2}}
		            </td>
		            <td class="text-right">
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.serverError'].m15_rate | number:2}}
		            </td>
		        </tr>
	        </div>
	        <div ng-if="metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.other'] && metrics.timers['com.codahale.metrics.servlet.AbstractInstrumentedFilter.requests']">
		        <tr>
		            <td>Other</td>
		            <td>
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.other'].count}}
		            </td>
		            <td>
		                <div class="progress progress-striped" style="height:25px">
		                    <div class="progress-bar progress-bar-danger" role="progressbar"
		                         aria-valuenow="{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.other'].count}}"
		                         aria-valuemin="0"
		                         aria-valuemax="{{metrics.timers['com.codahale.metrics.servlet.AbstractInstrumentedFilter.requests'].count}}"
		                         style="width: {{((metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.other'].count / metrics.timers['com.codahale.metrics.servlet.AbstractInstrumentedFilter.requests'].count) * 100.0) | number:2}}%">
		                         <span class="progress-value" style="line-height:25px; font-weight:bold; vertical-align:middle;">{{((metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.other'].count / metrics.timers['com.codahale.metrics.servlet.AbstractInstrumentedFilter.requests'].count) * 100.0) | number:2}}%</span>
		                    </div>
		                </div>
		            </td>
		            <td class="text-right">
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.serverError'].mean_rate | number:2}}
		            </td>
		            <td class="text-right">
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.serverError'].m1_rate | number:2}}
		            </td>
		            <td class="text-right">
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.serverError'].m5_rate | number:2}}
		            </td>
		            <td class="text-right">
		            	{{metrics.meters['com.codahale.metrics.servlet.AbstractInstrumentedFilter.responseCodes.serverError'].m15_rate | number:2}}
		            </td>
		        </tr>
	        </div>
	        </tbody>
	    </table>
	</div>
	</div>
	<!--if you enable stats for services, replace "serviceStats" with the appropriate metrics lookup or create a serviceStats object and add to model
		hasnt been tested with this code base, will be ugly (or broken) at first  -->
	<div ng-if="servicesStats && servicesStats.length > 0">
		<h3>Services statistics (time in millisecond)</h3>
		<div class="table-responsive">
		    <table class="table table-striped">
		        <thead>
		        <tr>
		            <th>Service name</th>
		            <th class="text-right">Count</th>
		            <th class="text-right">Mean</th>
		            <th class="text-right">Min</th>
		            <th class="text-right">p50</th>
		            <th class="text-right">p75</th>
		            <th class="text-right">p95</th>
		            <th class="text-right">p99</th>
		            <th class="text-right">Max</th>
		        </tr>
		        </thead>
		        <tbody>
			        <tr ng-repeat="(k, v) in servicesStats">
			            <td>{{k}}</td>
			            <td class="text-right">{{v.count}}</td>
			            <td class="text-right">{{v.mean * 1000 | number:0}}</td>
			            <td class="text-right">{{v.min * 1000 | number:0}}</td>
			            <td class="text-right">{{v.p50 * 1000 | number:0}}</td>
			            <td class="text-right">{{v.p75 * 1000 | number:0}}</td>
			            <td class="text-right">{{v.p95 * 1000 | number:0}}</td>
			            <td class="text-right">{{v.p99 * 1000 | number:0}}</td>
			            <td class="text-right">{{v.max * 1000 | number:0}}</td>
			        </tr>
		        </tbody>
		    </table>
		</div>
	</div>
	<!--if you decide to move totally to ehcache, replace "cacheStats" with appropriate metrics lookup or create a cacheStats object and add to model
		hasnt been tested with this code base, will be ugly (or broken) at first -->
	<div ng-if="cachesStats && cachesStats.length > 0">
		<h3>Cache statistics</h3>
		<div class="table-responsive">
		    <table class="table table-striped">
		        <thead>
		        <tr>
		            <th>Cache name</th>
		            <th class="text-right">Objects</th>
		            <th class="text-right">Hits</th>
		            <th class="text-right">Misses</th>
		            <th class="text-right">Eviction count</th>
		            <th class="text-right">Mean get time (ms)</th>
		        </tr>
		        </thead>
		        <tbody>
			        <tr ng-repeat="(k, v) in cachesStats" ng-once>
			            <td>{{v.name}}</td>
			            <td class="text-right">{{metrics.gauges[k + '.objects'].value}}</td>
			            <td class="text-right">{{metrics.gauges[k + '.hits'].value}}</td>
			            <td class="text-right">{{metrics.gauges[k + '.misses'].value}}</td>
			            <td class="text-right">{{metrics.gauges[k + '.eviction-count'].value}}</td>
			            <td class="text-right">{{metrics.gauges[k + '.mean-get-time'].value | number:2}}</td>
			        </tr>
		        </tbody>
		    </table>
		</div>
	</div>
	<!--right, now there is no good way to get metrics for the database, i recommend HikariCP, its a very effective connection pool
		see https://github.com/brettwooldridge/HikariCP 
		hasnt been tested with this code base, will be ugly (or broken) at first -->
	<div ng-if="metrics && metrics.gauges['HikariPool-0.pool.TotalConnections'] && metrics.gauges['HikariPool-0.pool.TotalConnections'].value > 0">
		<h3>DataSource statistics</h3>
		<div class="table-responsive">
		    <table class="table table-striped">
		        <thead>
		            <tr>
		                <th> metrics.datasource.usage  ({{metrics.gauges['HikariPool-0.pool.ActiveConnections'].value}} / {{metrics.gauges['HikariPool-0.pool.TotalConnections'].value}})</th>
		                <th class="text-right"> metrics.datasource.count </th>
		                <th class="text-right"> metrics.datasource.mean </th>
		                <th class="text-right"> metrics.datasource.min </th>
		                <th class="text-right"> metrics.datasource.p50 </th>
		                <th class="text-right"> metrics.datasource.p75 </th>
		                <th class="text-right"> metrics.datasource.p95 </th>
		                <th class="text-right"> metrics.datasource.p99 </th>
		                <th class="text-right"> metrics.datasource.max </th>
		            </tr>
		        </thead>
		        <tbody>
		            <tr>
		                <td>
		                    <div class="progress progress-striped" style="height:25px">
		                        <div class="progress-bar progress-bar-success" role="progressbar"
		                             aria-valuenow="{{metrics.gauges['HikariPool-0.pool.ActiveConnections'].value}}"
		                             aria-valuemin="0"
		                             aria-valuemax="{{metrics.gauges['HikariPool-0.pool.TotalConnections'].value}}"
		                             style="width: {{((metrics.gauges['HikariPool-0.pool.ActiveConnections'].value / metrics.gauges['HikariPool-0.pool.TotalConnections'].value) * 100.0) | number:2}}%">
		                             <span class="progress-value" style="line-height:25px; font-weight:bold; vertical-align:middle;">{{((metrics.gauges['HikariPool-0.pool.ActiveConnections'].value / metrics.gauges['HikariPool-0.pool.TotalConnections'].value) * 100.0) | number:2}}%</span>
		                        </div>
		                    </div>
		                </td>
		                <td class="text-right">{{metrics.histograms['HikariPool-0.pool.Usage'].count}}</td>
		                <td class="text-right">{{metrics.histograms['HikariPool-0.pool.Usage'].mean}}</td>
		                <td class="text-right">{{metrics.histograms['HikariPool-0.pool.Usage'].min}}</td>
		                <td class="text-right">{{metrics.histograms['HikariPool-0.pool.Usage'].p50}}</td>
		                <td class="text-right">{{metrics.histograms['HikariPool-0.pool.Usage'].p75}}</td>
		                <td class="text-right">{{metrics.histograms['HikariPool-0.pool.Usage'].p95}}</td>
		                <td class="text-right">{{metrics.histograms['HikariPool-0.pool.Usage'].p99}}</td>
		                <td class="text-right">{{metrics.histograms['HikariPool-0.pool.Usage'].max}}</td>
		            </tr>
		        </tbody>
		    </table>
		</div>
	</div>
</div>
<!-- Modal used to display the threads dump -->
<div ng-show="isAuthenticated" id="threadDumpModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">Thread Info</h4>
            </div>
            <div class="modal-body well">
            	<div class="container-fluid">
            		<div class="col-md-8 cold-offset-2">
	            		<div class="row">
			                <span class="label label-primary"> All&nbsp;<span class="badge">{{metrics.gauges['jvm.threads.count'].value}}</span></span>
			                <span class="label label-success"> Runnable&nbsp;<span class="badge">{{metrics.gauges['jvm.threads.runnable.count'].value}}</span></span>
			                <span class="label label-info"> Waiting&nbsp;<span class="badge">{{metrics.gauges['jvm.threads.waiting.count'].value}}</span></span>
			                <span class="label label-warning"> Timedwaiting&nbsp;<span class="badge">{{metrics.gauges['jvm.threads.timed_waiting.count'].value}}</span></span>
			                <span class="label label-danger"> Blocked&nbsp;<span class="badge">{{metrics.gauges['jvm.threads.blocked.count'].value}}</span></span>
	            		</div>
            		</div>
        			<iframe seamless id="threadDetails" src="metrics/threads" width="100%" height="300px"></iframe>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>